<!DOCTYPE html> <html lang="fr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> DocCustomKIE | Camille Barboule </title> <meta name="author" content="Camille Barboule"> <meta name="description" content="An end-to-end pipeline for custom Key Information Extraction from documents"> <meta name="keywords" content="NLP, IR, Agents, Deep-Learning, XAI"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%93%9A&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://camillebrl.github.io/projects/1_project/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Camille</span> Barboule </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/books/">bookshelf</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">DocCustomKIE</h1> <p class="post-description">An end-to-end pipeline for custom Key Information Extraction from documents</p> </header> <article> <h2 id="a-complete-pipeline-for-document-information-extraction">A Complete Pipeline for Document Information Extraction</h2> <p>DocCustomKIE is an end-to-end solution for extracting key information from any type of document. The project provides a complete workflow from data annotation to model deployment, requiring minimal data and no GPU for training or inference.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/doccustomkie/doc_kie_annotation-480.webp 480w,/assets/img/doccustomkie/doc_kie_annotation-800.webp 800w,/assets/img/doccustomkie/doc_kie_annotation-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/doccustomkie/doc_kie_annotation.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="annotation interface" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/doccustomkie/doc_kie_training-480.webp 480w,/assets/img/doccustomkie/doc_kie_training-800.webp 800w,/assets/img/doccustomkie/doc_kie_training-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/doccustomkie/doc_kie_training.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="training process" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/doccustomkie/doc_kie_inference-480.webp 480w,/assets/img/doccustomkie/doc_kie_inference-800.webp 800w,/assets/img/doccustomkie/doc_kie_inference-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/doccustomkie/doc_kie_inference.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="inference results" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> From left to right: intuitive annotation interface, automated training pipeline, and inference with extracted entities visualization. </div> <h2 id="key-features">Key Features</h2> <p>The pipeline offers several innovative features that make document processing accessible and efficient:</p> <ul> <li> <strong>üìÑ Minimal Data Requirements</strong>: Only about 10 documents needed for good performance</li> <li> <strong>üé® Intuitive Labeling Interface</strong>: Create custom labels for any information you need to extract</li> <li> <strong>üîç Advanced OCR</strong>: Intelligent region detection using Sobel gradients for optimal text recognition</li> </ul> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/doccustomkie/sobel_gradient_detection-480.webp 480w,/assets/img/doccustomkie/sobel_gradient_detection-800.webp 800w,/assets/img/doccustomkie/sobel_gradient_detection-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/doccustomkie/sobel_gradient_detection.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="sobel gradient detection" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <ul> <li> <strong>üîÑ Automatic Data Augmentation</strong>: Generate labeled variants to strengthen model robustness</li> <li> <strong>ü§ñ Lightweight Transformer Fine-tuning</strong>: Adapt Microsoft‚Äôs LayoutLMv3-base without GPU requirements</li> <li> <strong>üñ•Ô∏è Modular Inference Interface</strong>: Visualize extracted information or customize the pipeline for your needs</li> </ul> <h2 id="technical-approach">Technical Approach</h2> <p>The system employs a sophisticated multi-stage process:</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <div class="img-fluid rounded z-depth-1" style="background: #f8f9fa; padding: 20px;"> <svg viewbox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: auto;"> <rect width="1200" height="800" fill="#f8f9fa"></rect> <text x="600" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#2c3e50">DocCustomKIE Pipeline Architecture</text> <g transform="translate(50, 100)"> <rect x="0" y="0" width="300" height="600" rx="10" fill="#e8f4f8" stroke="#3498db" stroke-width="2"></rect> <text x="150" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#2c3e50">1. Document Processing</text> <rect x="50" y="60" width="200" height="80" rx="5" fill="#fff" stroke="#3498db" stroke-width="2"></rect> <text x="150" y="90" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Document Upload</text> <text x="150" y="110" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(PDF/PNG/JPG)</text> <path d="M 150 140 L 150 170" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowblue)"></path> <rect x="50" y="170" width="200" height="80" rx="5" fill="#fff" stroke="#3498db" stroke-width="2"></rect> <text x="150" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Sobel Gradient</text> <text x="150" y="220" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">Block Detection</text> <path d="M 150 250 L 150 280" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowblue)"></path> <rect x="50" y="280" width="200" height="80" rx="5" fill="#fff" stroke="#3498db" stroke-width="2"></rect> <text x="150" y="310" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Block Processing</text> <text x="150" y="330" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Upscale 3x + Sharpen)</text> <path d="M 150 360 L 150 390" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowblue)"></path> <rect x="50" y="390" width="200" height="80" rx="5" fill="#fff" stroke="#3498db" stroke-width="2"></rect> <text x="150" y="420" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Tesseract OCR</text> <text x="150" y="440" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Per Block)</text> <path d="M 150 470 L 150 500" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowblue)"></path> <rect x="50" y="500" width="200" height="80" rx="5" fill="#fff" stroke="#3498db" stroke-width="2"></rect> <text x="150" y="530" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Bbox Reconstruction</text> <text x="150" y="550" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Original Scale)</text> </g> <path d="M 350 400 L 420 400" stroke="#2c3e50" stroke-width="3" fill="none" marker-end="url(#arrow)"></path> <g transform="translate(420, 100)"> <rect x="0" y="0" width="300" height="600" rx="10" fill="#fef9e7" stroke="#f39c12" stroke-width="2"></rect> <text x="150" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#2c3e50">2. Annotation &amp; Training</text> <rect x="50" y="60" width="200" height="80" rx="5" fill="#fff" stroke="#f39c12" stroke-width="2"></rect> <text x="150" y="90" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Manual Annotation</text> <text x="150" y="110" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Custom Labels)</text> <path d="M 150 140 L 150 170" stroke="#f39c12" stroke-width="2" fill="none" marker-end="url(#arroworange)"></path> <rect x="50" y="170" width="200" height="80" rx="5" fill="#fff" stroke="#f39c12" stroke-width="2"></rect> <text x="150" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">BIO Tagging</text> <text x="150" y="220" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(B-/I-/O Format)</text> <path d="M 150 250 L 150 280" stroke="#f39c12" stroke-width="2" fill="none" marker-end="url(#arroworange)"></path> <rect x="50" y="280" width="200" height="80" rx="5" fill="#fff" stroke="#f39c12" stroke-width="2"></rect> <text x="150" y="310" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Data Augmentation</text> <text x="150" y="330" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Noise, Rotation, etc.)</text> <path d="M 150 360 L 150 390" stroke="#f39c12" stroke-width="2" fill="none" marker-end="url(#arroworange)"></path> <rect x="50" y="390" width="200" height="80" rx="5" fill="#fff" stroke="#f39c12" stroke-width="2"></rect> <text x="150" y="420" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">JSONL Export</text> <text x="150" y="440" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Normalized Bboxes)</text> <path d="M 150 470 L 150 500" stroke="#f39c12" stroke-width="2" fill="none" marker-end="url(#arroworange)"></path> <rect x="50" y="500" width="200" height="80" rx="5" fill="#fff" stroke="#f39c12" stroke-width="2"></rect> <text x="150" y="530" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">LayoutLMv3 Fine-tuning</text> <text x="150" y="550" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Token Classification)</text> </g> <path d="M 720 400 L 790 400" stroke="#2c3e50" stroke-width="3" fill="none" marker-end="url(#arrow)"></path> <g transform="translate(790, 100)"> <rect x="0" y="0" width="300" height="600" rx="10" fill="#ebfaf0" stroke="#27ae60" stroke-width="2"></rect> <text x="150" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#2c3e50">3. Inference</text> <rect x="50" y="60" width="200" height="80" rx="5" fill="#fff" stroke="#27ae60" stroke-width="2"></rect> <text x="150" y="90" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">New Document</text> <text x="150" y="110" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Same OCR Pipeline)</text> <path d="M 150 140 L 150 170" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowgreen)"></path> <rect x="50" y="170" width="200" height="80" rx="5" fill="#fff" stroke="#27ae60" stroke-width="2"></rect> <text x="150" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Model Prediction</text> <text x="150" y="220" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Label per Token)</text> <path d="M 150 250 L 150 280" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowgreen)"></path> <rect x="50" y="280" width="200" height="80" rx="5" fill="#fff" stroke="#27ae60" stroke-width="2"></rect> <text x="150" y="310" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">BIO Merging</text> <text x="150" y="330" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Entity Reconstruction)</text> <path d="M 150 360 L 150 390" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowgreen)"></path> <rect x="50" y="390" width="200" height="80" rx="5" fill="#fff" stroke="#27ae60" stroke-width="2"></rect> <text x="150" y="420" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Post-processing</text> <text x="150" y="440" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Clean Duplicates)</text> <path d="M 150 470 L 150 500" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowgreen)"></path> <rect x="50" y="500" width="200" height="80" rx="5" fill="#fff" stroke="#27ae60" stroke-width="2"></rect> <text x="150" y="530" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50">Structured Output</text> <text x="150" y="550" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(JSON + Visualization)</text> </g> <g transform="translate(570, 650)"> <rect x="-120" y="0" width="240" height="60" rx="30" fill="#e8d5f2" stroke="#9b59b6" stroke-width="2" stroke-dasharray="5,5"></rect> <text x="0" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">Future: Feedback Loop</text> <text x="0" y="45" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">(Human Corrections ‚Üí Retraining)</text> </g> <path d="M 940 580 C 940 650, 570 650, 570 580" stroke="#9b59b6" stroke-width="2" fill="none" stroke-dasharray="5,5" marker-end="url(#arrowpurple)"></path> <defs> <marker id="arrow" markerwidth="10" markerheight="10" refx="9" refy="3" orient="auto" markerunits="strokeWidth"> <path d="M0,0 L0,6 L9,3 z" fill="#2c3e50"></path> </marker> <marker id="arrowblue" markerwidth="10" markerheight="10" refx="9" refy="3" orient="auto" markerunits="strokeWidth"> <path d="M0,0 L0,6 L9,3 z" fill="#3498db"></path> </marker> <marker id="arroworange" markerwidth="10" markerheight="10" refx="9" refy="3" orient="auto" markerunits="strokeWidth"> <path d="M0,0 L0,6 L9,3 z" fill="#f39c12"></path> </marker> <marker id="arrowgreen" markerwidth="10" markerheight="10" refx="9" refy="3" orient="auto" markerunits="strokeWidth"> <path d="M0,0 L0,6 L9,3 z" fill="#27ae60"></path> </marker> <marker id="arrowpurple" markerwidth="10" markerheight="10" refx="9" refy="3" orient="auto" markerunits="strokeWidth"> <path d="M0,0 L0,6 L9,3 z" fill="#9b59b6"></path> </marker> </defs> </svg> </div> </div> <div class="col-sm-4 mt-3 mt-md-0"> <svg viewbox="0 0 600 700" xmlns="http://www.w3.org/2000/svg"> <rect width="600" height="700" fill="#f8f9fa"></rect> <text x="300" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50">BIO Tagging Example</text> <g transform="translate(50, 80)"> <rect x="0" y="0" width="500" height="180" rx="8" fill="#fff" stroke="#ddd" stroke-width="2"></rect> <text x="250" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">Original Document Text</text> <text x="20" y="60" font-family="Courier New, monospace" font-size="14" fill="#333">Patient: John Smith</text> <text x="20" y="85" font-family="Courier New, monospace" font-size="14" fill="#333">Born: 15/03/1985 in Paris, France</text> <text x="20" y="110" font-family="Courier New, monospace" font-size="14" fill="#333">Address: 123 Main Street, Lyon</text> <text x="20" y="135" font-family="Courier New, monospace" font-size="14" fill="#333">Doctor: Dr. Marie Dupont</text> </g> <path d="M 300 260 L 300 290" stroke="#2c3e50" stroke-width="3" fill="none" marker-end="url(#arrowdown)"></path> <g transform="translate(50, 300)"> <rect x="0" y="0" width="500" height="100" rx="8" fill="#e8f4f8" stroke="#3498db" stroke-width="2"></rect> <text x="250" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">After OCR Tokenization</text> <g transform="translate(20, 45)"> <rect x="0" y="0" width="60" height="30" rx="4" fill="#fff" stroke="#3498db"></rect> <text x="30" y="20" font-family="monospace" font-size="12" text-anchor="middle">Patient:</text> <rect x="70" y="0" width="40" height="30" rx="4" fill="#fff" stroke="#3498db"></rect> <text x="90" y="20" font-family="monospace" font-size="12" text-anchor="middle">John</text> <rect x="120" y="0" width="50" height="30" rx="4" fill="#fff" stroke="#3498db"></rect> <text x="145" y="20" font-family="monospace" font-size="12" text-anchor="middle">Smith</text> <rect x="180" y="0" width="40" height="30" rx="4" fill="#fff" stroke="#3498db"></rect> <text x="200" y="20" font-family="monospace" font-size="12" text-anchor="middle">Born:</text> <rect x="230" y="0" width="80" height="30" rx="4" fill="#fff" stroke="#3498db"></rect> <text x="270" y="20" font-family="monospace" font-size="12" text-anchor="middle">15/03/1985</text> <rect x="320" y="0" width="25" height="30" rx="4" fill="#fff" stroke="#3498db"></rect> <text x="332" y="20" font-family="monospace" font-size="12" text-anchor="middle">in</text> <rect x="355" y="0" width="50" height="30" rx="4" fill="#fff" stroke="#3498db"></rect> <text x="380" y="20" font-family="monospace" font-size="12" text-anchor="middle">Paris,</text> <rect x="415" y="0" width="50" height="30" rx="4" fill="#fff" stroke="#3498db"></rect> <text x="440" y="20" font-family="monospace" font-size="12" text-anchor="middle">France</text> </g> </g> <path d="M 300 400 L 300 430" stroke="#2c3e50" stroke-width="3" fill="none" marker-end="url(#arrowdown)"></path> <g transform="translate(50, 440)"> <rect x="0" y="0" width="500" height="200" rx="8" fill="#fef9e7" stroke="#f39c12" stroke-width="2"></rect> <text x="250" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">BIO Tagged Tokens</text> <g transform="translate(20, 45)"> <g> <rect x="0" y="0" width="60" height="30" rx="4" fill="#e0e0e0" stroke="#999"></rect> <text x="30" y="20" font-family="monospace" font-size="11" text-anchor="middle">Patient:</text> <rect x="0" y="35" width="60" height="20" rx="3" fill="#666" stroke="#666"></rect> <text x="30" y="48" font-family="Arial" font-size="11" font-weight="bold" text-anchor="middle" fill="white">O</text> </g> <g transform="translate(70, 0)"> <rect x="0" y="0" width="40" height="30" rx="4" fill="#ffcccc" stroke="#ff6666"></rect> <text x="20" y="20" font-family="monospace" font-size="11" text-anchor="middle">John</text> <rect x="0" y="35" width="40" height="20" rx="3" fill="#ff6666" stroke="#ff6666"></rect> <text x="20" y="48" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="white">B-NAME</text> </g> <g transform="translate(120, 0)"> <rect x="0" y="0" width="50" height="30" rx="4" fill="#ffcccc" stroke="#ff6666"></rect> <text x="25" y="20" font-family="monospace" font-size="11" text-anchor="middle">Smith</text> <rect x="0" y="35" width="50" height="20" rx="3" fill="#ff9999" stroke="#ff9999"></rect> <text x="25" y="48" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="white">I-NAME</text> </g> <g transform="translate(180, 0)"> <rect x="0" y="0" width="40" height="30" rx="4" fill="#e0e0e0" stroke="#999"></rect> <text x="20" y="20" font-family="monospace" font-size="11" text-anchor="middle">Born:</text> <rect x="0" y="35" width="40" height="20" rx="3" fill="#666" stroke="#666"></rect> <text x="20" y="48" font-family="Arial" font-size="11" font-weight="bold" text-anchor="middle" fill="white">O</text> </g> <g transform="translate(230, 0)"> <rect x="0" y="0" width="80" height="30" rx="4" fill="#ccffcc" stroke="#66cc66"></rect> <text x="40" y="20" font-family="monospace" font-size="11" text-anchor="middle">15/03/1985</text> <rect x="0" y="35" width="80" height="20" rx="3" fill="#66cc66" stroke="#66cc66"></rect> <text x="40" y="48" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="white">B-DATE</text> </g> <g transform="translate(320, 0)"> <rect x="0" y="0" width="25" height="30" rx="4" fill="#e0e0e0" stroke="#999"></rect> <text x="12" y="20" font-family="monospace" font-size="11" text-anchor="middle">in</text> <rect x="0" y="35" width="25" height="20" rx="3" fill="#666" stroke="#666"></rect> <text x="12" y="48" font-family="Arial" font-size="11" font-weight="bold" text-anchor="middle" fill="white">O</text> </g> <g transform="translate(355, 0)"> <rect x="0" y="0" width="50" height="30" rx="4" fill="#ccccff" stroke="#6666ff"></rect> <text x="25" y="20" font-family="monospace" font-size="11" text-anchor="middle">Paris,</text> <rect x="0" y="35" width="50" height="20" rx="3" fill="#6666ff" stroke="#6666ff"></rect> <text x="25" y="48" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="white">B-CITY</text> </g> <g transform="translate(415, 0)"> <rect x="0" y="0" width="50" height="30" rx="4" fill="#ccccff" stroke="#6666ff"></rect> <text x="25" y="20" font-family="monospace" font-size="11" text-anchor="middle">France</text> <rect x="0" y="35" width="50" height="20" rx="3" fill="#9999ff" stroke="#9999ff"></rect> <text x="25" y="48" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="white">I-CITY</text> </g> </g> <g transform="translate(20, 115)"> <g> <rect x="0" y="0" width="50" height="30" rx="4" fill="#e0e0e0" stroke="#999"></rect> <text x="25" y="20" font-family="monospace" font-size="11" text-anchor="middle">Doctor:</text> <rect x="0" y="35" width="50" height="20" rx="3" fill="#666" stroke="#666"></rect> <text x="25" y="48" font-family="Arial" font-size="11" font-weight="bold" text-anchor="middle" fill="white">O</text> </g> <g transform="translate(60, 0)"> <rect x="0" y="0" width="30" height="30" rx="4" fill="#ffccff" stroke="#ff66ff"></rect> <text x="15" y="20" font-family="monospace" font-size="11" text-anchor="middle">Dr.</text> <rect x="0" y="35" width="30" height="20" rx="3" fill="#ff66ff" stroke="#ff66ff"></rect> <text x="15" y="48" font-family="Arial" font-size="9" font-weight="bold" text-anchor="middle" fill="white">B-DOC</text> </g> <g transform="translate(100, 0)"> <rect x="0" y="0" width="45" height="30" rx="4" fill="#ffccff" stroke="#ff66ff"></rect> <text x="22" y="20" font-family="monospace" font-size="11" text-anchor="middle">Marie</text> <rect x="0" y="35" width="45" height="20" rx="3" fill="#ff99ff" stroke="#ff99ff"></rect> <text x="22" y="48" font-family="Arial" font-size="9" font-weight="bold" text-anchor="middle" fill="white">I-DOC</text> </g> <g transform="translate(155, 0)"> <rect x="0" y="0" width="50" height="30" rx="4" fill="#ffccff" stroke="#ff66ff"></rect> <text x="25" y="20" font-family="monospace" font-size="11" text-anchor="middle">Dupont</text> <rect x="0" y="35" width="50" height="20" rx="3" fill="#ff99ff" stroke="#ff99ff"></rect> <text x="25" y="48" font-family="Arial" font-size="9" font-weight="bold" text-anchor="middle" fill="white">I-DOC</text> </g> </g> </g> <g transform="translate(50, 660)"> <text x="0" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2c3e50">Legend:</text> <text x="60" y="0" font-family="Arial, sans-serif" font-size="12" fill="#333"> <tspan font-weight="bold">B-</tspan> = Beginning of entity </text> <text x="200" y="0" font-family="Arial, sans-serif" font-size="12" fill="#333"> <tspan font-weight="bold">I-</tspan> = Inside entity </text> <text x="320" y="0" font-family="Arial, sans-serif" font-size="12" fill="#333"> <tspan font-weight="bold">O</tspan> = Outside (not an entity) </text> </g> <defs> <marker id="arrowdown" markerwidth="10" markerheight="10" refx="5" refy="5" orient="auto"> <path d="M0,0 L5,10 L10,0 L5,5 z" fill="#2c3e50"></path> </marker> </defs> </svg> </div> </div> <div class="caption"> System architecture showing the complete pipeline, and example of BIO tagging for multi-token entities. </div> <h3 id="1-intelligent-ocr-with-block-detection">1. Intelligent OCR with Block Detection</h3> <p>The system uses Sobel gradient analysis to intelligently detect text regions in documents. Each region is then upscaled (3x) and sharpened before applying Tesseract OCR, resulting in significantly improved text recognition accuracy compared to standard whole-image OCR.</p> <h3 id="2-bio-tagging-for-entity-recognition">2. BIO Tagging for Entity Recognition</h3> <p>The annotation interface automatically handles multi-token entities using the BIO (Beginning-Inside-Outside) tagging scheme. When annotating ‚ÄúJohn Smith Ltd.‚Äù, the system generates:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">B-COMPANY</code> for ‚ÄúJohn‚Äù</li> <li> <code class="language-plaintext highlighter-rouge">I-COMPANY</code> for ‚ÄúSmith‚Äù</li> <li> <code class="language-plaintext highlighter-rouge">I-COMPANY</code> for ‚ÄúLtd.‚Äù</li> </ul> <p>This allows the model to learn complex entity boundaries and handle fragmented text naturally.</p> <h3 id="3-data-augmentation-pipeline">3. Data Augmentation Pipeline</h3> <p>After annotation, the system automatically generates augmented versions of your documents with various transformations:</p> <ul> <li>Contrast and brightness adjustments</li> <li>Gaussian noise addition</li> <li>Slight rotations and perspective changes</li> <li>All while preserving and transferring the original annotations using Levenshtein distance matching</li> </ul> <h2 id="workflow">Workflow</h2> <p>annotate.py ‚Üí layoutlmv3_ft.py ‚Üí inference.py</p> <ol> <li> <strong>Annotation Phase</strong>: Upload documents, run OCR, and annotate key information with custom labels</li> <li> <strong>Training Phase</strong>: Fine-tune LayoutLMv3 on your annotated data (typically 2-4 hours on CPU)</li> <li> <strong>Inference Phase</strong>: Process new documents and extract structured information</li> </ol> <h2 id="future-development-feedback-loop">Future Development: Feedback Loop</h2> <p>The next major enhancement will introduce a feedback loop in the inference pipeline, allowing continuous improvement of the model through human corrections:</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/doccustomkie/doc_kie_feedback_loop-480.webp 480w,/assets/img/doccustomkie/doc_kie_feedback_loop-800.webp 800w,/assets/img/doccustomkie/doc_kie_feedback_loop-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/doccustomkie/doc_kie_feedback_loop.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="feedback loop diagram" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Planned feedback loop architecture: predictions ‚Üí human corrections ‚Üí model retraining with incremental learning. </div> <h3 id="planned-features">Planned Features:</h3> <ol> <li> <strong>Interactive Correction Interface</strong>: Review and correct model predictions directly in the inference UI</li> <li> <strong>Incremental Learning</strong>: Retrain the model on corrected data without forgetting previous knowledge</li> <li> <strong>Active Learning</strong>: Prioritize uncertain predictions for human review</li> <li> <strong>Version Control</strong>: Track model improvements over time with performance metrics</li> </ol> <p>This feedback mechanism will enable the system to continuously improve its accuracy on your specific document types, creating a truly adaptive solution.</p> <h2 id="use-cases">Use Cases</h2> <p>DocCustomKIE has been successfully applied to various document types:</p> <ul> <li>Medical records and prescriptions</li> <li>Administrative forms and certificates</li> <li>Financial documents and invoices</li> <li>Legal contracts and agreements</li> <li>Any structured or semi-structured documents requiring information extraction</li> </ul> <h2 id="technical-stack">Technical Stack</h2> <ul> <li> <strong>OCR</strong>: Tesseract with custom pre-processing pipeline</li> <li> <strong>Model</strong>: Microsoft LayoutLMv3-base (multimodal transformer)</li> <li> <strong>Framework</strong>: PyTorch with Hugging Face Transformers</li> <li> <strong>Interface</strong>: Flask web application</li> <li> <strong>Data Format</strong>: JSONL for annotations, supporting standard KIE datasets</li> </ul> <p>The system is designed to be lightweight and accessible, running efficiently on standard hardware without specialized GPU requirements.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> ¬© Copyright 2025 Camille Barboule. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>